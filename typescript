export const list = query({
  args: {},
  handler: async (ctx) => {
    // ...
    const harvestsWithDetails = await Promise.all(
      harvests.map(async (harvest) => {
        const tree = await ctx.db.get(harvest.treeId);
        const cutter = await ctx.db.get(harvest.cutterWorkerId);
        const picker = harvest.pickerWorkerId ? await ctx.db.get(harvest.pickerWorkerId) : null;
        return { ...harvest, tree, cutter, picker };
      })
    );
    return harvestsWithDetails;
  },
});

treeOwners: defineTable({
  name: v.string(),
  phone: v.string(),
  location: v.string(),
  numberOfTrees: v.number(),
  annualRent: v.number(),
  notes: v.optional(v.string()),
}),